# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App –Ω–∞ –ø–æ—Ä—Ç 4477

## üìã **–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ Mini App**

### **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python 3.8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
   ```cmd
   python --version
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É Mini App:**
   ```cmd
   cd TGBOT\miniapp
   ```

### **–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```cmd
pip install -r requirements.txt
```

### **–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `TGBOT` (–Ω–µ –≤ miniapp):

```env
# === –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ===
TELEGRAM_BOT_TOKEN=your_bot_token_here
ADMIN_USER_IDS=your_telegram_id

# === Mini App (–ø–æ—Ä—Ç 4477) ===
MINIAPP_URL=http://localhost:4477/miniapp
MINIAPP_WEBHOOK_URL=http://localhost:4477
MINIAPP_MODE=local
LINK_EXPIRY_MINUTES=40

# === SMTP –¥–ª—è OTP ===
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=your_email@gmail.com
CORP_EMAIL_DOMAIN=yourcompany.com
```

### **–®–∞–≥ 4: –ó–∞–ø—É—Å–∫ Mini App**

#### **–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Python (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```cmd
cd TGBOT\miniapp
python run.py
```

#### **–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Windows —Å–∫—Ä–∏–ø—Ç**
```cmd
cd TGBOT\miniapp
run_windows.bat
```

#### **–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ PowerShell**
```cmd
cd TGBOT\miniapp
.\run_windows.ps1
```

### **–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

1. **Mini App –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞:** `http://localhost:4477`
2. **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `http://localhost:4477/miniapp`
3. **–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
   ```
   Starting Mini App on 0.0.0.0:4477
   Debug mode: True
   ```

### **–®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**

–í **–¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**:
```cmd
cd TGBOT
python bot.py
```

## üîß **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**

### **–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ "üîß –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à ID –≤ `ADMIN_USER_IDS`

### **–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

1. –ù–∞–∂–º–∏—Ç–µ "üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏"
2. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
3. –í–≤–µ–¥–∏—Ç–µ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `network`)
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `–°–µ—Ç—å`)
5. –í–≤–µ–¥–∏—Ç–µ –∏–∫–æ–Ω–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `üåê`)

### **–®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**

1. –ù–∞–∂–º–∏—Ç–µ "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é"
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
5. –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ
6. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (PDF, DOCX, DOC, TXT)
7. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª –≤ —á–∞—Ç

## üåê **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–ø–æ—Ä—Ç 4477)**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: Nginx + SSL**

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location /miniapp {
        proxy_pass http://localhost:4477;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: ngrok (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)**

```cmd
ngrok http 4477
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ `.env`:
```env
MINIAPP_URL=https://your-ngrok-url.ngrok.io/miniapp
MINIAPP_WEBHOOK_URL=https://your-ngrok-url.ngrok.io
```

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Mini App** –Ω–∞ –ø–æ—Ä—Ç—É 4477
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
3. **–ù–∞–∂–º–∏—Ç–µ "üìö –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"**
4. **–í–≤–µ–¥–∏—Ç–µ email** –¥–ª—è OTP
5. **–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥** –∏–∑ email
6. **–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é** –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
7. **–û—Ç–∫—Ä–æ–µ—Ç—Å—è Mini App** —Å —Ñ–∞–π–ª–æ–º

## ‚ùå **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º**

### **–ü—Ä–æ–±–ª–µ–º–∞: "Port 4477 already in use"**
```cmd
netstat -ano | findstr :4477
taskkill /PID <PID> /F
```

### **–ü—Ä–æ–±–ª–µ–º–∞: "Module not found"**
```cmd
pip install -r requirements.txt
```

### **–ü—Ä–æ–±–ª–µ–º–∞: "SMTP error"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password –¥–ª—è Gmail
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–º–µ–Ω –≤ `CORP_EMAIL_DOMAIN`

## ‚úÖ **–ì–æ—Ç–æ–≤–æ!**

–¢–µ–ø–µ—Ä—å Mini App —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 4477 –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ