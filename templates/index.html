{% extends "base.html" %}

{% block title %}Главная - BG Survey Platform{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-center py-5 mb-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h1 class="display-4 fw-bold text-dark mb-4 hero-title">
                    <i class="fas fa-chart-bar text-danger me-3"></i>
                    BG Survey Platform
                </h1>
                <p class="lead text-muted mb-4 hero-description">
                    Корпоративная платформа для создания, проведения и анализа опросов компании BunterGroup
                </p>
                <div class="d-flex justify-content-center gap-3 mb-5">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('dashboard') }}" class="btn btn-danger btn-lg px-4">
                            <i class="fas fa-tachometer-alt me-2"></i>Панель управления
                        </a>
                        {% if current_user.can_create_surveys %}
                            <a href="{{ url_for('create_survey') }}" class="btn btn-outline-danger btn-lg px-4">
                                <i class="fas fa-plus me-2"></i>Создать опрос
                            </a>
                        {% endif %}
                    {% else %}
                        <a href="{{ url_for('login') }}" class="btn btn-danger btn-lg px-4">
                            <i class="fas fa-sign-in-alt me-2"></i>Войти в систему
                        </a>
                        <a href="{{ url_for('register') }}" class="btn btn-outline-danger btn-lg px-4">
                            <i class="fas fa-user-plus me-2"></i>Регистрация
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Section -->
<div class="stats-section py-5 mb-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-clipboard-list text-danger fa-3x"></i>
                        </div>
                        <h3 class="text-danger fw-bold display-6">{{ total_surveys }}</h3>
                        <p class="text-muted mb-0">Всего опросов</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-users text-success fa-3x"></i>
                        </div>
                        <h3 class="text-success fw-bold display-6">{{ total_users }}</h3>
                        <p class="text-muted mb-0">Пользователей</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-chart-line text-info fa-3x"></i>
                        </div>
                        <h3 class="text-info fw-bold display-6">{{ total_responses }}</h3>
                        <p class="text-muted mb-0">Ответов</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body">
                        <div class="stat-icon mb-3">
                            <i class="fas fa-play-circle text-warning fa-3x"></i>
                        </div>
                        <h3 class="text-warning fw-bold display-6">{{ active_surveys }}</h3>
                        <p class="text-muted mb-0">Активных опросов</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="features-section py-5 mb-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="fw-bold text-dark mb-3 features-title">Возможности платформы</h2>
                <p class="text-muted lead features-description">Все необходимое для создания профессиональных опросов</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm feature-card">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-lock text-primary fa-3x"></i>
                        </div>
                        <h5 class="card-title fw-bold">Безопасность</h5>
                        <p class="card-text text-muted">
                            Анонимные опросы с отслеживанием IP-адресов, авторизованные опросы и управление доступом
                        </p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Анонимные опросы</li>
                            <li><i class="fas fa-check text-success me-2"></i>Авторизация пользователей</li>
                            <li><i class="fas fa-check text-success me-2"></i>Контроль доступа</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm feature-card">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-chart-pie text-success fa-3x"></i>
                        </div>
                        <h5 class="card-title fw-bold">Аналитика</h5>
                        <p class="card-text text-muted">
                            Детальный анализ результатов с графиками и статистикой для принятия обоснованных решений
                        </p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Интерактивные графики</li>
                            <li><i class="fas fa-check text-success me-2"></i>Детальная статистика</li>
                            <li><i class="fas fa-check text-success me-2"></i>Экспорт в Excel</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm feature-card">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-user-shield text-info fa-3x"></i>
                        </div>
                        <h5 class="card-title fw-bold">Администрирование</h5>
                        <p class="card-text text-muted">
                            Полный контроль над пользователями, правами доступа и интеграция с LDAP
                        </p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Управление пользователями</li>
                            <li><i class="fas fa-check text-success me-2"></i>LDAP интеграция</li>
                            <li><i class="fas fa-check text-success me-2"></i>Система ролей</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Surveys Section -->
{% if recent_surveys %}
<div class="recent-surveys py-5 mb-5 bg-light rounded">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h3 class="fw-bold text-dark recent-title">Последние опросы</h3>
                <p class="text-muted recent-description">Недавно созданные опросы в системе</p>
            </div>
        </div>
        
        <div class="row">
            {% for survey in recent_surveys %}
            <div class="col-md-4 mb-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start mb-2">
                            <i class="fas fa-clipboard-list text-danger me-2 mt-1"></i>
                            <div class="flex-grow-1">
                                <h6 class="card-title mb-1 fw-bold">{{ survey.title }}</h6>
                                <small class="text-muted">{{ survey.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
                            </div>
                        </div>
                        {% if survey.description %}
                            <p class="card-text text-muted small">{{ survey.description[:80] }}{% if survey.description|length > 80 %}...{% endif %}</p>
                        {% endif %}
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="badge bg-{{ 'success' if survey.is_active else 'secondary' }}">
                                {% if survey.is_active %}Активен{% else %}Неактивен{% endif %}
                            </span>
                            <span class="badge bg-info">{{ survey.responses|length }} ответов</span>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- CTA Section -->
<div class="cta-section text-center py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h3 class="fw-bold text-dark mb-4 cta-title">Готовы начать?</h3>
                <p class="text-muted mb-4 lead cta-description">
                    Создавайте профессиональные опросы, собирайте данные и анализируйте результаты в реальном времени
                </p>
                {% if not current_user.is_authenticated %}
                    <a href="{{ url_for('login') }}" class="btn btn-danger btn-lg px-5">
                        <i class="fas fa-rocket me-2"></i>Начать работу
                    </a>
                {% else %}
                    <a href="{{ url_for('create_survey') }}" class="btn btn-danger btn-lg px-5">
                        <i class="fas fa-plus me-2"></i>Создать опрос
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.feature-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.1) !important;
}

.stat-icon {
    transition: transform 0.3s ease;
}

.stat-icon:hover {
    transform: scale(1.1);
}

.hero-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
}

/* Поддержка темной темы */
[data-bs-theme="dark"] .hero-section {
    background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
}

[data-bs-theme="dark"] .hero-title {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .hero-description {
    color: #e2e8f0 !important;
}

[data-bs-theme="dark"] .features-title {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .features-description {
    color: #e2e8f0 !important;
}

[data-bs-theme="dark"] .recent-title {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .recent-description {
    color: #e2e8f0 !important;
}

[data-bs-theme="dark"] .cta-title {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .cta-description {
    color: #e2e8f0 !important;
}

/* Дополнительная поддержка темной темы */
[data-bs-theme="dark"] .hero-section .text-dark {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .hero-section .text-muted {
    color: #e2e8f0 !important;
}

/* Универсальные правила для темной темы */
[data-bs-theme="dark"] .text-dark {
    color: #f7fafc !important;
}

[data-bs-theme="dark"] .text-muted {
    color: #adb5bd !important;
}

[data-bs-theme="dark"] .lead {
    color: #e2e8f0 !important;
}

[data-bs-theme="dark"] h1, [data-bs-theme="dark"] h2, [data-bs-theme="dark"] h3, 
[data-bs-theme="dark"] h4, [data-bs-theme="dark"] h5, [data-bs-theme="dark"] h6 {
    color: #f7fafc !important;
}

.stats-section .card {
    transition: transform 0.3s ease;
}

.stats-section .card:hover {
    transform: translateY(-3px);
}
</style>
{% endblock %}